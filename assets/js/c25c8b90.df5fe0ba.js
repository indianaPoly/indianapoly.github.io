"use strict";(self.webpackChunktil=self.webpackChunktil||[]).push([[281],{2974:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>a,toc:()=>o});var a=s(3849),l=s(4848),t=s(8453);const r={title:"Kubernetes Basic(3)",authors:["hyeonlim"],tags:["TIL","Kubernetes"]},i=void 0,c={authorsImageUrls:[void 0]},o=[{value:"Secret",id:"secret",level:2},{value:"StateFulSet",id:"statefulset",level:2},{value:"Kustomize / Helm \ucc28\ud2b8",id:"kustomize--helm-\ucc28\ud2b8",level:2},{value:"Kustomize",id:"kustomize",level:3},{value:"Helm chart",id:"helm-chart",level:3},{value:"\uc2e4\uc2b5",id:"\uc2e4\uc2b5",level:2},{value:"MySQL DB Secret \uc0dd\uc131 \ubc0f \uc0ac\uc6a9",id:"mysql-db-secret-\uc0dd\uc131-\ubc0f-\uc0ac\uc6a9",level:3},{value:"StatefulSet",id:"statefulset-1",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"secret",children:"Secret"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\uc0dd\uc131\ud558\ub294 \ubc29\ubc95\uc740 cli\ub85c \ud558\uac70\ub098 .yml \ud30c\uc77c\uc744 \uc791\uc131\ud574\uc11c \ub9cc\ub4dc\ub294 \ubc29\ubc95\uc774 \uc788\uc5b4\uc694."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl create secret generic my-secret \\\n--from-literal=username=admin \\\n--from-literal=password=1234\n"})}),"\n",(0,l.jsx)(n.p,{children:"cli\ub85c \uac12\uc744 \ud655\uc778\uc744 \ud574\uc8fc\ub824\uba74, \uc544\ub798 cli \uba85\ub839\uc744 \ud1b5\ud574\uc11c yml\uc744 \ucd9c\ub825\ud560 \uc218 \uc788\uc5b4\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get secret my-secret -o yaml\n"})}),"\n",(0,l.jsx)("img",{src:"/img/blog/kubernetes/2025-07-17/img1.png"}),"\n",(0,l.jsx)(n.p,{children:"\uc5ec\uae30\uc11c \ucd9c\ub825\ub418\ub294 \ub370\uc774\ud130 \uc5ed\uc2dc base64\ub85c \uc778\ucf54\ub529\uc774 \ub418\uae30 \ub54c\ubb38\uc5d0 \uc774\ub97c \ud655\uc778\ud574\uc8fc\uae30 \uc704\ud574\uc11c\ub294\n\ubcf5\ud638\ud654\ud574\uc8fc\uc5b4\uc57c \ud574\uc694."}),"\n",(0,l.jsx)(n.p,{children:"yml \ud30c\uc77c\ub85c \ub123\uc5b4\uc904\ub54c\ub294 base64 \uc778\ucf54\ub529\ub41c \uac12\uc744 \ub123\uc5b4\uc8fc\uc5b4\uc57c \ud574\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"apiVersion: v1\nkind: Secret\nmetadata:\n  name: my-secret2\ntype: Opaque\ndata:\n  username: YWRtaW4= # admin (base64 \uc778\ucf54\ub529)\n  password: MTIzNA== # 1234 (base64 \uc778\ucf54\ub529)\n"})}),"\n",(0,l.jsx)(n.p,{children:"\uc704\uc640 \uac19\uc774 \uc124\uc815\uc744 \ud558\uace0 \ub09c \uc774\ud6c4\uc5d0 \ud658\uacbd\ubcc0\uc218\ub85c \ub118\uaca8\uc904 \uc218\ub3c4 \uc788\uace0, \ubcfc\ub968\uc73c\ub85c \ub118\uaca8\uc904 \uc218\ub3c4 \uc788\uc5b4\uc694."}),"\n",(0,l.jsx)(n.p,{children:"\ud658\uacbd\ubcc0\uc218\ub85c \ub118\uaca8 \uc904\ub54c\ub294 \uc544\ub798\uc640 \uac19\uc774 key\uac12\uc744 \uc9c0\uc815\ud574\uc11c \ub118\uaca8\uc8fc\uc5b4\uc57c \ud574\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"spec:\n  containers:\n    - name: mycontainer\n      image: nginx\n      env:\n        - name: USERNAME\n          valueFrom:\n            secretKeyRef:\n              name: my-secret\n              key: username\n        - name: PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: my-secret\n              key: password\n"})}),"\n",(0,l.jsx)(n.p,{children:"\ubcfc\ub968\uc73c\ub85c \ub118\uaca8\uc8fc\ub294 \uac83\uc740 \ub530\ub85c key\ub97c \uc124\uc815\ud574\uc8fc\ub294 \uac83\uc774 \uc544\ub2c8\ub77c \uc0dd\uc131\ud55c secret\ub97c \uc804\uccb4 \ub118\uaca8\uc8fc\uc5b4\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:'spec:\n  containers:\n    - name: mycontainer\n      image: nginx\n      volumeMounts:\n        - name: secret-volume\n          mountPath: "/etc/secret"\n          readOnly: true\n  volumes:\n    - name: secret-volume\n      secret:\n        secretName: my-secret\n'})}),"\n",(0,l.jsx)(n.h2,{id:"statefulset",children:"StateFulSet"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\uc0dd\uc131\ub41c Pod\ub9c8\ub2e4 \ubcc4\ub3c4\uc758 \ub514\uc2a4\ud06c \uacf5\uac04\uc744 \uac00\uc838\uc57c\ud558\ub294 \uacbd\uc6b0\uc5d0 \uc8fc\ub85c \uc0ac\uc6a9\ud574\uc694. \ubd84\uc0b0 \uae30\ubc18 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uacbd\uc6b0 \ud638\uc2a4\ud2b8\uba85\uacfc IP \ub4f1\uc774 \ubc14\ub00c\uba74 \uc548\ub3fc\uc694."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"ReplicaSet\uc758 \uacbd\uc6b0\uc5d0\ub294 \uc0dd\uc131 \ubc0f \uc0ad\uc81c\uac00 \ub3d9\uc2dc\uc5d0 \uc9c4\ud589\ub418\ub294 \ubc18\uba74\uc5d0, StatefullSet\uc740 \uc21c\ucc28\uc801\uc73c\ub85c \uc9c4\ud589\ub418\uc5b4\uc11c \uc2dc\uac04 \uc870\uc808\uc774 \uac00\ub2a5\ud574\uc694."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Pod\ub97c \uc0ad\uc81c\ud558\ub294 \uacbd\uc6b0 ID \uac12\uc774 \uac00\uc7a5 \ud070 \uac83\ubd80\ud130 \uc0ad\uc81c\uac00 \ub3fc\uc694. \uc81c\uc77c \ub9c8\uc9c0\ub9c9\uc5d0 \uc0dd\uc131\ub41c Pod\uac00 \uba3c\uc800 \uc0ad\uc81c\uac00 \ub418\uace0 \ub9c8\uc2a4\ud130\uc758 \uacbd\uc6b0\uc5d0\ub294 \uac00\uc7a5 \ub9c8\uc9c0\ub9c9\uc5d0 \uc0ad\uc81c\uac00 \ub3fc\uc694."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\uc2a4\ucf00\uc77c\ub9ac\uc5d0\uc11c Pod\uac00 \uc0ad\uc81c\uac00 \ub418\uba74 \ud574\ub2f9 Pod\uac00 \ubb3c\uace0 \uc788\ub294 PVC\ub294 Pod\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \uac00\uc9c0\uace0 \uc788\uc5b4\uc694. \ub530\ub77c\uc11c Pod\ub97c \uc0dd\uc131\ud558\uba74 \uc774\uc804\uacfc \ub3d9\uc77c\ud55c ID\ub85c \uc7ac\uc0dd\uc131\uc774 \ub3fc\uc694."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u203c Deployment\ub294 Elastic Block Store\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc544\uc694. \ub9cc\uc57d Deployment\uc5d0 \ub514\uc2a4\ud06c\ub97c \ubd99\ud788\ub77c\uace0 \ud55c\ub2e4\uba74 EFS\ub97c \ubd99\ud600\uc57c \ud574\uc694."}),"\n",(0,l.jsx)(n.h2,{id:"kustomize--helm-\ucc28\ud2b8",children:"Kustomize / Helm \ucc28\ud2b8"}),"\n",(0,l.jsx)(n.p,{children:"2\uac1c\ub97c \uac19\uc774 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc9c0\ub9cc \uac70\uc758 \uac19\uc774 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc544\uc694."}),"\n",(0,l.jsx)(n.h3,{id:"kustomize",children:"Kustomize"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"base + overlay\ub97c \uc870\ud569\ud558\uc5ec \ud658\uacbd\ubcc4 \ubc30\ud3ec YAML\uc744 kustomize build \uba85\ub839\uc73c\ub85c \ucd94\ucd9c\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-csharp",children:"kustomize/\n\u251c\u2500\u2500 base/\n\u2502   \u2514\u2500\u2500 deployment.yaml\n\u251c\u2500\u2500 overlays/\n\u2502   \u251c\u2500\u2500 dev/\n\u2502   \u2502   \u2514\u2500\u2500 kustomization.yaml\n\u2502   \u251c\u2500\u2500 stage/\n\u2502   \u2514\u2500\u2500 prod/\n\u2502   \u2514\u2500\u2500 aws/\n\u2502   \u2514\u2500\u2500 gcp/\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"helm-chart",children:"Helm chart"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\uc608\ub97c \ub4e4\uc5b4\uc11c MYSQL \uac1c\ubc1c\uc790\uac00 yml\uc744 \uc81c\uacf5\uc744 \ud558\uace0 \uc18c\ube44\uc790\uac00 \ud658\uacbd\ubcc0\uc218\ub098 \uc124\uc815 \ub4f1\uc744 \ubcc0\uacbd\ud558\uace0 \uc2f6\uc744 \ub54c :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\uac1c\ubc1c\uc790\uac00 Helm \ucc28\ud2b8\ub97c \ud65c\uc6a9\ud558\uba74 \ubcc0\uacbd \uac00\ub2a5\ud55c \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc81c\uacf5\ud574\uc918\uc694. \uc774\ub97c \ud1b5\ud574\uc11c \uc0ac\uc6a9\uc790\ub294 \ud658\uacbd\ubcc0\uc218\ub098 \uc124\uc815\uc744 \uc27d\uac8c \ubc14\uafc0 \uc218 \uc788\uc5b4\uc694."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\uc124\uce58 \ubc29\ubc95"})}),"\n",(0,l.jsx)(n.p,{children:"\uc544\ub798\uc640 \uac19\uc740 \uba85\ub839\uc5b4\ub97c \uc21c\uc11c\ub300\ub85c \uc785\ub825\uc744 \ud574\uc8fc\uba74 helm chart\ub97c \uc124\uce58\ud560 \uc218 \uc788\uc5b4\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3\n\nchmod 700 get_helm.sh\n\n./get_helm.sh\n"})}),"\n",(0,l.jsx)(n.p,{children:"\uc798 \uc124\uce58\uac00 \ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud558\uae30 \uc704\ud574\uc11c mysql\ub97c \uac80\uc0c9\uc744 \ud574\ubcf4\uba74 \uc798 \ub098\uc624\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc5b4\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm show chart stable/mysql\n\napiVersion: v1\nappVersion: 5.7.30\ndeprecated: true\ndescription: DEPRECATED - Fast, reliable, scalable, and easy to use open-source relational\n  database system.\nhome: https://www.mysql.com/\nicon: https://www.mysql.com/common/logos/logo-mysql-170x115.png\nkeywords:\n- mysql\n- database\n- sql\nname: mysql\nsources:\n- https://github.com/kubernetes/charts\n- https://github.com/docker-library/mysql\nversion: 1.6.9\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"helm chart \uc0dd\uc131\ud558\uae30"})}),"\n",(0,l.jsx)(n.p,{children:"\ud574\ub2f9 \uba85\ub839\uc5b4\ub97c \ud1b5\ud574\uc11c \uc0dd\uc131\ud574\uc8fc\uc138\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm create <\uc774\ub984>\n"})}),"\n",(0,l.jsx)(n.p,{children:"templates \ud3f4\ub354\uc5d0\uc11c deployment.yml\uc640 service.yml\uc744 \uc0dd\uc131\uc744 \ud574\uc918\uc694. _helpers.tpl\uc744 \uc81c\uc678\ud55c \ub098\uba38\uc9c0 \ud30c\uc77c\ub4e4\uc740 \uc0ad\uc81c\ub97c \uc9c4\ud589\ud574\uc918\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"# deployment.yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: {{ .Values.container.name }}\nspec:\n  replicas: {{ .Values.replicas }}\n  selector:\n    matchLabels:\n      app: {{ .Values.container.name }}\n  template:\n    metadata:\n      labels:\n        app: {{ .Values.container.name }}\n        environment: {{ .Values.environment }}\n    spec:\n      containers:\n        - name: {{ .Values.container.name }}\n          image: {{ .Values.container.image }}:{{ .Values.container.tag }}\n          ports:\n            - containerPort: {{ .Values.container.port }}\n          env:\n            - name: environment\n              value: {{ .Values.environment }}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"# service.yml\napiVersion: v1\nkind: Service\nmetadata:\n  name: {{ .Values.container.name }}-service\n  labels:\n    app: {{ .Values.container.name }}\nspec:\n  ports:\n  - port: 80\n    protocol: TCP\n    targetPort: {{ .Values.container.port }}\n  selector:\n    app: {{ .Values.container.name }}\n  type: LoadBalancer\n"})}),"\n",(0,l.jsx)(n.p,{children:"\uae30\uc874\uc758 values.yaml\uc744 \uc804\uccb4 \uc0ad\uc81c\ub97c \ud574\uc918\uc694. \uadf8\ub7f0\ub2e4\uc74c\uc5d0 \uc544\ub798\ub97c \ub123\uc5b4\uc918\uc694. \uc774\ub807\uac8c \ud558\uba74 \uc0ac\uc6a9\uc790\ub294 \uc5ec\uae30\uc5d0 \uc9c0\uc815\ub41c \ubcc0\uc218\ub9cc \uac74\ub4e4 \uc218 \uc788\ub2e4\ub294 \uac83\uc744 \uc54c\ub824\uc918\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"environment: development\ncontainer:\n  name: nginx\n  port: 80\n  image: nginx\n  tag: latest\nreplicas: 2\n"})}),"\n",(0,l.jsx)(n.p,{children:"\uc704\uc5d0\uc11c \uc791\uc5c5\ud55c \uac83\uc744 \uc124\uce58\ub97c \uc9c4\ud589\ud574\uc918\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm install nginxstd ./nginxstd\n"})}),"\n",(0,l.jsx)(n.p,{children:"\ud328\ud0a4\uc9c0\ub97c \uc0dd\uc131\ud574\uc8fc\uace0 \ud30c\uc77c\uc744 \uc774\ub3d9\uc2dc\ucf1c\uc90d\ub2c8\ub2e4. \uadf8\ub9ac\uace0 helm repository \ud30c\uc77c\uc744 \uc0dd\uc131\ud574\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm package ./nginxstd\n\nmkdir prod\n\nmv ./nginx-std-0.1.0.tgz ./prod/\n\n# \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac \ud30c\uc77c \uc0dd\uc131 (index.yaml)\nheml repo index ./prod\n\n# \ud30c\uc77c \uc0dd\uc131 \ud655\uc778\ncat ./prod/index.yaml\n"})}),"\n",(0,l.jsx)(n.p,{children:"\uc704 \uc791\uc5c5\uae4c\uc9c0 \ub2e4 \ud588\ub2e4\uba74 Github Repository\ub97c \ub9cc\ub4e4\uc5b4\uc694. \uadf8\ub9ac\uace0 Repository\uc5d0 \uc6b0\ub9ac\uac00 \uc791\uc5c5\ud55c \uac83\uc744 \uc62c\ub824\uc918\uc694. Github\uc5d0 \uc815\uc0c1\uc801\uc73c\ub85c \ub4f1\ub85d\uc774 \uc644\ub8cc\uac00 \ub418\uc5c8\ub2e4\uba74 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \ud1b5\ud574\uc11c repository\ub97c \ucd94\uac00\uc2dc\ucf1c\uc90d\ub2c8\ub2e4."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm repo add helm-prod <\uc790\uc2e0 github \uc8fc\uc18c\uc5d0 \uc62c\ub77c\uac00 \uc788\ub294 helm Repository>\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\uc2e4\uc2b5",children:"\uc2e4\uc2b5"}),"\n",(0,l.jsx)(n.h3,{id:"mysql-db-secret-\uc0dd\uc131-\ubc0f-\uc0ac\uc6a9",children:"MySQL DB Secret \uc0dd\uc131 \ubc0f \uc0ac\uc6a9"}),"\n",(0,l.jsx)(n.p,{children:"Secret\ub97c \uc0dd\uc131\ud558\ub294\ub370 \uc694\uad6c\uc870\uac74\uc740 \uc544\ub798\uc640 \uac19\uc544\uc694. \ud574\ub2f9 \ub0b4\uc6a9\uc744 \ub123\uae30 \uc704\ud574\uc11c\ub294 \uadf8\ub300\ub85c \uc791\uc131\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c base64\ub85c \uc778\ucf54\ub529\uc744 \uc9c4\ud589\ud574\uc57c\ud574\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-txt",children:"MYSQL_USER: user1\nMYSQL_PASSWORD: pw1234\nMYSQL_ROOT_PASSWORD: rootpw9876\nMYSQL_DATABASE: mydb\n"})}),"\n",(0,l.jsx)(n.p,{children:"\uccab \ubc88\uc9f8\ub85c Secret\ub97c \uc0dd\uc131\uc744 \ud574\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"apiVersion: v1\nkind: Secret\nmetadata:\n  name: mysql-secret\n  labels:\n    app: mysql\ndata:\n  MYSQL_USER: dXNlcjE= #user1\n  MYSQL_PASSWORD: cHcxMjM0 #pw1234\n  MYSQL_ROOT_PASSWORD: cm9vdHB3OTg3Ng== #rootpw9876\n  MYSQL_DATABASE: bXlkYg== #mydb\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"kubectl apply -f ./\ud30c\uc77c\uc774\ub984"})," \uba85\ub839\uc5b4\ub85c \uc2e4\ud589\uc744 \ud558\uba74 \uc0dd\uc131\uc774 \ub3fc\uc694."]}),"\n",(0,l.jsx)(n.p,{children:"\uc0dd\uc131\uc744 \ud574\uc900\ub2e4\uc74c\uc5d0 \ud658\uacbd\ubcc0\uc218 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud574\uc11c Pod\ub97c \uc0dd\uc131\uc744 \ud574\uc904\uac70\uc5d0\uc694. \uc774 \ub54c secretKeyRef\uc758 \uc774\ub984\uc744 \uc0dd\uc131\ud55c secret\uc758 \uc774\ub984\uc73c\ub85c \uc9c0\uc815\uc744 \ud574\uc8fc\uba74 \ub3fc\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: mysql-secret-env-pod\nspec:\n  containers:\n    - name: mysql-test\n      image: mysql:8.0\n      env:\n        - name: MYSQL_USER\n          valueFrom:\n            secretKeyRef:\n              name: mysql-secret\n              key: MYSQL_USER\n        - name: MYSQL_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: mysql-secret\n              key: MYSQL_PASSWORD\n        - name: MYSQL_ROOT_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: mysql-secret\n              key: MYSQL_ROOT_PASSWORD\n        - name: MYSQL_DATABASE\n          valueFrom:\n            secretKeyRef:\n              name: mysql-secret\n              key: MYSQL_DATABASE\n"})}),"\n",(0,l.jsx)(n.h3,{id:"statefulset-1",children:"StatefulSet"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"apiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: nodejs-sfs\nspec:\n  selector:\n    matchLabels:\n      app: nodejs-sfs\n  serviceName: nodejs-sfs\n  replicas: 2\n  template:\n    metadata:\n      labels:\n        app: nodejs-sfs\n    spec:\n      containers:\n        - name: nodejs-sfs\n          image: hyeonlim/nodejs:sfs\n          ports:\n            - name: http\n              containerPort: 8080\n          volumeMounts:\n            - name: data\n              mountPath: /var/data\n  volumeClaimTemplates:\n    - metadata:\n        name: data\n      spec:\n        resources:\n          requests:\n            storage: 1Mi\n        accessModes:\n          - ReadWriteOnce\n"})}),"\n",(0,l.jsx)(n.p,{children:"\ud574\ub2f9 \uc791\uc5c5\uc744 \ud1b5\ud574\uc11c \uc544\ub798\uc640 \uac19\uc740 \ub9ac\uc2a4\uc18c\ub97c \uac00\uc9c0\ub294 PVC\ub97c \ub9cc\ub4e4\uc5b4\uc8fc\uace0, volumeClaimTemplates\ub97c \ud1b5\ud574\uc11c Pod \ub9c8\ub2e4 \ub3c5\ub9bd\uc801\uc778 PVC\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc5b4\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"resources:\n  requests:\n    storage: 1Mi\n  accessModes:\n    - ReadWriteOnce\n"})}),"\n",(0,l.jsx)(n.p,{children:"\uc704 \uc791\uc5c5\uc774 \ub9c8\ubb34\ub9ac\uac00 \ub418\uace0 \ub098\uba74 load balancer\ub97c \uc124\uc815\ud558\uc5ec \ud2b8\ub798\ud53d\uc744 Pod \ubcc4\ub85c \ubd84\uc0b0\uc744 \uc9c4\ud589\ud574\uc918\uc694."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"apiVersion: v1\nkind: Service\nmetadata:\n  name: nodesjs-sfs-lb\n  annotations:\n    service.beta.kubernetes.io/aws-load-balancer-type: external\n    service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip\n    service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing\nspec:\n  type: LoadBalancer\n  sessionAffinity: None\n  ports:\n    - port: 80\n      targetPort: 8080\n  selector:\n    app: nodejs-sfs\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u2705 \uc911\uc694\ud55c \uc810"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"StatefulSet Pod\ub9c8\ub2e4 \ub370\uc774\ud130\uac00 \ub2e4\ub974\uba74, \ub85c\ub4dc\ubc38\ub7f0\uc11c\ub85c \uc811\uadfc\ud55c \uc0ac\uc6a9\uc790\ub9c8\ub2e4 \ub2e4\ub978 \uacb0\uacfc\ub97c \ubc1b\uac8c \ub3fc\uc694. \ub530\ub77c\uc11c \uc774\ub7ec\ud55c \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574\uc11c"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Shared Storage (NFS, S3)\ub97c \uc0ac\uc6a9\ud574\uc694."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\uc0ac\uc6a9\uc790 \ub9c8\ub2e4 Pod \uc811\uc18d\uc744 \uace0\uc815\uc744 \uc2dc\ud0ac \uc218 \uc788\uc5b4\uc694. sticky session\uc774\ub77c\uace0 \ud574\uc694. \uc544\ub798\uc640 \uac19\uc740 \uc608\uc2dc\ub85c \uc124\uc815\uc744 \ud574\uc904 \uc218 \uc788\uc5b4\uc694."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yml",children:"sessionAffinity: ClientIP\n"})}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},3849:e=>{e.exports=JSON.parse('{"permalink":"/blog/2025/07/17/kubernetes/kubernetes-basic-3-title","editUrl":"https://github.com/indianaPoly/indianapoly.github.io/blog/kubernetes/2025-07-17-kubernetes-basic-3-title.mdx","source":"@site/blog/kubernetes/2025-07-17-kubernetes-basic-3-title.mdx","title":"Kubernetes Basic(3)","description":"Secret","date":"2025-07-17T00:00:00.000Z","tags":[{"inline":true,"label":"TIL","permalink":"/blog/tags/til"},{"inline":true,"label":"Kubernetes","permalink":"/blog/tags/kubernetes"}],"readingTime":5.14,"hasTruncateMarker":false,"authors":[{"name":"\uace0\ud604\ub9bc","title":"\ud504\ub860\ud2b8\uc5d4\ub4dc | \ube14\ub85d\uccb4\uc778 Developer","url":"https://www.linkedin.com/in/%ED%98%84%EB%A6%BC-%EA%B3%A0-b53602221/","socials":{"github":"https://github.com/indianaPoly"},"imageURL":"https://ifh.cc/g/GagTYM.jpg","key":"hyeonlim","page":null}],"frontMatter":{"title":"Kubernetes Basic(3)","authors":["hyeonlim"],"tags":["TIL","Kubernetes"]},"unlisted":false,"prevItem":{"title":"Terraform\uc73c\ub85c EKS \ubc30\ud3ec \uc2dc \ubc1c\uc0dd\ud558\ub294 \ub9ac\uc18c\uc2a4 \ucda9\ub3cc \ud574\uacb0 \uac00\uc774\ub4dc","permalink":"/blog/2025/07/19/terraform/terraform-errorHandling-title"},"nextItem":{"title":"Kubernetes Basic(2)","permalink":"/blog/2025/07/16/kubernetes/kubernetes-basic-2-title"}}')},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var a=s(6540);const l={},t=a.createContext(l);function r(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);