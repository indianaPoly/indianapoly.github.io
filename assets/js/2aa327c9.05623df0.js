"use strict";(self.webpackChunktil=self.webpackChunktil||[]).push([[3501],{5423:e=>{e.exports=JSON.parse('{"permalink":"/blog/2025/07/15/kubernetes/kubernetes-basic-1-title","editUrl":"https://github.com/indianaPoly/indianapoly.github.io/blog/kubernetes/2025-07-15-kubernetes-basic-1-title.mdx","source":"@site/blog/kubernetes/2025-07-15-kubernetes-basic-1-title.mdx","title":"kubernetes Basic (1)","description":"{/ truncate /}","date":"2025-07-15T00:00:00.000Z","tags":[{"inline":true,"label":"TIL","permalink":"/blog/tags/til"},{"inline":true,"label":"Kubernetes","permalink":"/blog/tags/kubernetes"}],"readingTime":5.13,"hasTruncateMarker":true,"authors":[{"name":"\uace0\ud604\ub9bc","title":"\ud504\ub860\ud2b8\uc5d4\ub4dc | \ube14\ub85d\uccb4\uc778 Developer","url":"https://www.linkedin.com/in/%ED%98%84%EB%A6%BC-%EA%B3%A0-b53602221/","socials":{"github":"https://github.com/indianaPoly"},"imageURL":"https://ifh.cc/g/GagTYM.jpg","key":"hyeonlim","page":null}],"frontMatter":{"title":"kubernetes Basic (1)","authors":["hyeonlim"],"tags":["TIL","Kubernetes"]},"unlisted":false,"prevItem":{"title":"\uac1c\ubc1c\ud558\uae30 \uc804 \uc544\uc774\ub514\uc5b4 \ud68c\uc758 \uc774\ub807\uac8c \ud574\ubcf4\uc790.","permalink":"/blog/2025/07/16/etc/idea_meeting-title"},"nextItem":{"title":"Docker Basic(1)","permalink":"/blog/2025/07/14/docker/docker-basic-1-title"}}')},8453:(e,n,l)=>{l.d(n,{R:()=>t,x:()=>d});var s=l(6540);const i={},r=s.createContext(i);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},9122:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>t,metadata:()=>s,toc:()=>a});var s=l(5423),i=l(4848),r=l(8453);const t={title:"kubernetes Basic (1)",authors:["hyeonlim"],tags:["TIL","Kubernetes"]},d=void 0,c={authorsImageUrls:[void 0]},a=[{value:"Deployment",id:"deployment",level:2},{value:"1. RECREATE (\uc7ac\uac00\ub3d9 \ubc29\uc2dd: v1 \u2192 v2)",id:"1-recreate-\uc7ac\uac00\ub3d9-\ubc29\uc2dd-v1--v2",level:3},{value:"2. RAMPED (Rolling Update)",id:"2-ramped-rolling-update",level:3},{value:"3. Blue / Green \ubc30\ud3ec",id:"3-blue--green-\ubc30\ud3ec",level:3},{value:"4. Canary \ubc30\ud3ec",id:"4-canary-\ubc30\ud3ec",level:3},{value:"5. A/B \ud14c\uc2a4\ud2b8",id:"5-ab-\ud14c\uc2a4\ud2b8",level:3},{value:"6. Shadow \ud2b8\ub798\ud53d (\ubbf8\ub7ec\ub9c1)",id:"6-shadow-\ud2b8\ub798\ud53d-\ubbf8\ub7ec\ub9c1",level:3},{value:"Service",id:"service",level:2},{value:"cluster IP",id:"cluster-ip",level:3},{value:"Node Port",id:"node-port",level:3},{value:"Load Balancer",id:"load-balancer",level:3},{value:"Ingress",id:"ingress",level:3},{value:"Headless service",id:"headless-service",level:3},{value:"volume",id:"volume",level:3},{value:"\uc2e4\uc2b5",id:"\uc2e4\uc2b5",level:2},{value:"1. HTTPD \ubc30\ud3ec \u2192 \uc774\ubbf8\uc9c0 \uc5c5\ub370\uc774\ud2b8 \u2192 \ub864\ubc31 \u2192 \uc0ad\uc81c",id:"1-httpd-\ubc30\ud3ec--\uc774\ubbf8\uc9c0-\uc5c5\ub370\uc774\ud2b8--\ub864\ubc31--\uc0ad\uc81c",level:3}];function h(e){const n={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:["\n",(0,i.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,i.jsx)(n.h3,{id:"1-recreate-\uc7ac\uac00\ub3d9-\ubc29\uc2dd-v1--v2",children:"1. RECREATE (\uc7ac\uac00\ub3d9 \ubc29\uc2dd: v1 \u2192 v2)"}),"\n",(0,i.jsx)(n.p,{children:"\ud2b9\uc9d5: \uc11c\ube44\uc2a4 \uc911\ub2e8 \ubc1c\uc0dd"}),"\n",(0,i.jsx)(n.p,{children:"\uc7a5\uc810: \uc124\uc815\uc774 \uc26c\uc6c0"}),"\n",(0,i.jsx)(n.p,{children:"\ube44\uace0: \ud604\uc5c5\uc5d0\uc11c \uac00\uc7a5 \ud754\ud788 \uc0ac\uc6a9\ub418\uba70, \uc11c\ube44\uc2a4 \uc911\ub2e8\uc744 \uac10\uc218\ud574\uc57c \ud558\ub294 \ubc29\uc2dd"}),"\n",(0,i.jsx)(n.h3,{id:"2-ramped-rolling-update",children:"2. RAMPED (Rolling Update)"}),"\n",(0,i.jsx)(n.p,{children:"\ud2b9\uc9d5: \uc21c\ucc28\uc801\uc73c\ub85c \uc5f0\uacb0 \uc2dc\ub3c4 \u2192 \ubb34\uc911\ub2e8 \uc11c\ube44\uc2a4 \uc81c\uacf5"}),"\n",(0,i.jsx)(n.p,{children:"\uc124\uc815 \ubc29\ubc95:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"type: RollingUpdate\n\nmaxSurge: \uc608) 1 \u2192 replicas + maxSurge \ub9cc\ud07c pod \uc0dd\uc131 \uac00\ub2a5\n\nmaxUnavailable: \uc608) 1 \u2192 replicas \uc911 \ub3d9\uc2dc\uc5d0 \uc911\ub2e8 \uac00\ub2a5\ud55c pod \uc218\n\n\u21d2 \uc704 2\uac1c\uc758 \uc635\uc158\uc744 \ud1b5\ud574\uc11c \uc7ac\uac00\ub3d9 \uc18d\ub3c4\ub97c \uc81c\uc5b4\ud560 \uc218 \uc788\uc74c\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\ucd94\uac00 \uc124\uc815",":Sticky"," session: \ubc84\uc804 \uac04 \uc774\ub3d9 \ubc29\uc9c0"]}),"\n",(0,i.jsx)(n.h3,{id:"3-blue--green-\ubc30\ud3ec",children:"3. Blue / Green \ubc30\ud3ec"}),"\n",(0,i.jsx)(n.p,{children:"\ud2b9\uc9d5: selector\uc758 \ubc84\uc804 \ubcc0\uacbd\uc73c\ub85c \uc804\uccb4 \uad50\uccb4"}),"\n",(0,i.jsx)(n.p,{children:"\uc0ac\uc6a9 \ubaa9\uc801:\uac1c\ubc1c \ubc84\uc804\uc744 \uc6b4\uc601\uc5d0 \ubc14\ub85c \ubc18\uc601\ud574\uc57c \ud558\ub294 \uc0c1\ud669"}),"\n",(0,i.jsx)(n.h3,{id:"4-canary-\ubc30\ud3ec",children:"4. Canary \ubc30\ud3ec"}),"\n",(0,i.jsx)(n.p,{children:"\ud2b9\uc9d5: ramped\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc, \uc77c\ubd80 \ud2b8\ub798\ud53d\uc73c\ub85c \uba3c\uc800 \uc548\uc815\uc131 \uac80\uc99d \ud6c4 \uc804\uccb4 \uc774\uc804"}),"\n",(0,i.jsx)(n.p,{children:"\uc124\uc815: replicas: 9(v1), 1(v2) \uc124\uc815, RouteRule\uc758 route \u2192 weight \uc124\uc815\uc73c\ub85c \uc190\uc27d\uac8c \uc124\uc815 \uac00\ub2a5"}),"\n",(0,i.jsx)(n.h3,{id:"5-ab-\ud14c\uc2a4\ud2b8",children:"5. A/B \ud14c\uc2a4\ud2b8"}),"\n",(0,i.jsx)(n.p,{children:"\ud2b9\uc9d5 : header, cookie \uae30\ubc18\uc73c\ub85c \uc0ac\uc6a9\uc790 \uadf8\ub8f9 \ubd84\ub9ac"}),"\n",(0,i.jsx)(n.p,{children:"\uc0ac\uc6a9 \ubaa9\uc801: UI\ub098 \uae30\ub2a5 \uac1c\uc120\uc758 \ud6a8\uacfc\ub97c \ud655\uc778\ud558\uace0\uc790 \ud560 \ub54c (\uc0c8\ub85c\uc6b4 UI\uac00 \uad6c\ub9e4\uc728\uc744 \ub192\uc774\ub294\uc9c0 \ud655\uc778)"}),"\n",(0,i.jsx)(n.p,{children:"\uc124\uc815: match\uc5d0 header \uc870\uac74 \ucd94\uac00"}),"\n",(0,i.jsx)(n.h3,{id:"6-shadow-\ud2b8\ub798\ud53d-\ubbf8\ub7ec\ub9c1",children:"6. Shadow \ud2b8\ub798\ud53d (\ubbf8\ub7ec\ub9c1)"}),"\n",(0,i.jsx)(n.p,{children:"\uc0ac\uc6a9 \ubaa9\uc801: \uae30\uc874 \uc131\ub2a5 \uac1c\uc120\uc744 \uc704\ud574 (\uc608\uc2dc : Monolith \u2192 Microservice \uad6c\uc870 \uc804\ud658 \uc2dc \uc720\uc6a9)"}),"\n",(0,i.jsx)(n.p,{children:"\uc124\uc815: mirror \uc124\uc815\uc73c\ub85c \uc2e4\uc81c \uc694\uccad\uc744 \ubcf5\uc81c\ud558\uc5ec \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc73c\ub85c \uc804\ub2ec"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"service",children:"Service"}),"\n",(0,i.jsx)(n.p,{children:"\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 \uc11c\ube44\uc2a4\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \ub124\ud2b8\uc6cc\ud06c\uc774\ub2e4. (\ubb3c\ub9ac\uc801\uc778 \uac83\uc774 \uc544\ub2c8\ub2e4.)"}),"\n",(0,i.jsx)(n.p,{children:"(\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 pod\uac00 \uc8fd\uace0 \ub2e4\ub978 \ub178\ub4dc\ub85c \uc774\ub3d9\ud558\uba74 IP\uac00 \ubcc0\ub3d9\uc774\ub418\ub294\ub370, \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc548\uc5d0\ub294 \uaddc\uce59 \uae30\ubc18\uc758 DNS \uc11c\ubc84\uc2a4\uac00 \uc788\ub2e4.)"}),"\n",(0,i.jsx)(n.h3,{id:"cluster-ip",children:"cluster IP"}),"\n",(0,i.jsx)(n.p,{children:"\ub514\ud3f4\ud2b8 \uc11c\ube44\uc2a4, layer4 => \ub0b4\ubd80\uc5d0\ub9cc \uc811\uc18d\uc774 \uac00\ub2a5\ud558\ub2e4."}),"\n",(0,i.jsx)(n.h3,{id:"node-port",children:"Node Port"}),"\n",(0,i.jsx)(n.p,{children:"\ud2b8\ub798\ud53d\uc774 \uc624\uba74 \ub178\ub4dc\uc758 \ud2b9\uc815 \ud3ec\ud2b8\uc5d0 \ub3c4\ucc29\ud558\uace0, \ud074\ub7ec\uc2a4\ud130 IP\ub85c \uac00\uace0 \uc774\ub97c \ubd84\uae30 \uc2dc\ud0a8\ub2e4."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\uac1c\ubc1c\uc790\ub4e4\uc774 \ud655\uc778\ud558\uae30 \uc704\ud574\uc11c \uc8fc\ub85c \uc0ac\uc6a9\ud558\uace0 \uc6ec\ub9cc\ud558\uba74 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294\ub2e4."}),"\n",(0,i.jsxs)(n.li,{children:["\ub178\ub4dc\ub97c \ub9cc\ub4dc\ub294 \uc774\uc720\ub294?","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\ud2b8\ub798\ud53d\uc774 \ubab0\ub9ac\ub294 \uac83\uc744 \ubc18\uc751\ud558\uae30 \uc704\ud568\uc774\ub2e4."}),"\n",(0,i.jsx)(n.li,{children:"\uc5b4\ub5a4 \ub178\ub4dc\uc5d0 \uaddc\uce59\uc744 \uc801\uc6a9\ud574\uc11c \uc791\uc5c5\ud558\uae30 \uc704\ud568\uc774\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"load-balancer",children:"Load Balancer"}),"\n",(0,i.jsx)(n.p,{children:"\ud2b8\ub798\ud53d\uc774 \ub4e4\uc5b4\uc624\uba74 \ub098\ub188. cluster ip\uc640 \ub2e4\ub978 \uc810\uc740 cluster ip\ub294 \ub0b4\ubd80\uc5d0 \uc788\uace0 \ub85c\ub4dc\ubc38\ub7f0\uc11c\ub294 \uc678\ubd80\uc5d0 \uc704\uce58\ud574\uc788\ub2e4."}),"\n",(0,i.jsx)(n.h3,{id:"ingress",children:"Ingress"}),"\n",(0,i.jsx)(n.p,{children:"\uc678\ubd80\uc5d0 \uc704\uce58\uc5d0 \uc788\uc74c. \ub85c\ub4dc \ubc38\ub7f0\uc11c\uc640\uc758 \ucc28\uc774\uc810\uc740 \ub85c\ub4dc \ubc38\ub7f0\uc11c\ub294 layer4\uc774\uace0 Ingress\ub294 layer7\uc774\ub2e4. (layer1~layer7\uae4c\uc9c0 \ud655\uc778\uc744 \ud574\ubcfc \uc218 \uc788\ub2e4.)"}),"\n",(0,i.jsx)(n.p,{children:"\uc0ac\uc6a9\uc790\uac00 xxx.xxx.xxx.com\uc774 \uc811\uc18d\uc744 \ud558\uba74\nigw\ub97c \ud1b5\ud574 ingress(\ud37c\ube14\ub9ad \ub3c4\uba54\uc778\uc774 \uc790\ub3d9 \ud65c\ub3d9, ALB, NLB)\uc5d0 \ub4e4\uc5b4\uc624\uace0 k8s \uc11c\ube44\uc2a4\uc5d0 \uc811\uc18d\uc774 \ub41c\ub2e4. \uccab \ubc88\uc9f8 \uaecd\ub370\uae30\ub294 replicaset \ub450 \ubc88\uc9f8 \uaecd\ub370\uae30\ub294 deployment\ningress\ub9cc \uc0dd\uc131\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c \ub0b4\ubd80 \uc11c\ube44\uc2a4\ub97c \uc0dd\uc131\ud574\uc57c \ud1b5\uc2e0\uc774 \ub41c\ub2e4."}),"\n",(0,i.jsx)(n.p,{children:"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc548\uc5d0 LB controller\uac00 ingress\ub97c \uc0dd\uc131\ud558\uace0, \uc0c1\ud0dc\ub97c \uac10\uc2dc\ud55c\ub2e4. \uadf8\ub9ac\uace0 \uc0ad\uc81c\ub3c4 \ud574\uc900\ub2e4."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ingress\ub97c \uc0ad\uc81c\ud558\uace0 \ud14c\ub77c\ud3fc\uc744 \uc0ad\uc81c\ud558\ub294 \uac83\uc774 \ub354 \ube60\ub974\ub2e4. ingress\ub294 \uc678\ubd80 \uc11c\ube44\uc2a4\uc774\uae30 \ub54c\ubb38\uc774\ub2e4."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"\uc65c ELB IP\uac00 3\uac1c \ub098\uc624\ub294\uac00?"})]}),"\n",(0,i.jsx)("img",{src:"/img/blog/kubernetes/2025-07-15/img1.png",alt:"\uc124\uba85",width:"600"}),"\n",(0,i.jsxs)(n.p,{children:["AWS\uc5d0\uc11c Network Load Balancer(NLB)\ub294 ",(0,i.jsx)(n.strong,{children:"\uc11c\ube0c\ub137\uc774 \uc874\uc7ac\ud558\ub294 \ubaa8\ub4e0 \uac00\uc6a9\uc601\uc5ed(AZ)"})," \uc5d0 ",(0,i.jsx)(n.strong,{children:"\uc790\ub3d9\uc73c\ub85c\nIP\ub97c \ud560\ub2f9"}),"\ud569\ub2c8\ub2e4. \uc774\ub294 \uace0\uac00\uc6a9\uc131(High Availability)\uc744 \ubcf4\uc7a5\ud558\uae30 \uc704\ud55c \uae30\ubcf8 \ub3d9\uc791\uc774\ub2e4."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\uc11c\uc6b8 \ub9ac\uc804(",(0,i.jsx)(n.code,{children:"ap-northeast-2"}),")\uc5d0\uc11c VPC \uc0dd\uc131"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\uc544\ub798\uc640 \uac19\uc774 ",(0,i.jsx)(n.strong,{children:"3\uac1c\uc758 \ud504\ub77c\uc774\ube57 \uc11c\ube0c\ub137 \uc0dd\uc131"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'variable "private_subnet_cidrs" {\n  type = map(string)\n  default = {\n    a = "10.1.4.0/24"  // ap-northeast-2a (8\uce35)\n    b = "10.1.5.0/24"  // ap-northeast-2b (9\uce35)\n    c = "10.1.6.0/24"  // ap-northeast-2c (10\uce35)\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"EKS \ud074\ub7ec\uc2a4\ud130 \uc0dd\uc131"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)("img",{src:"/img/blog/kubernetes/2025-07-15/img2.png",alt:"\uc124\uba85",width:"600"}),"-"]}),"\n",(0,i.jsx)(n.p,{children:"EKS\ud074\ub7ec\uc2a4\ud130\ub97c \uc0dd\uc131\ud558\uba74 \ub178\ub4dc \uadf8\ub8f9\uc744 \uad6c\uc131 - \ub178\ub4dc\ub294 2\uac1c\uc5d0\ub9cc \ubc30\uce58\uac00 \ub41c\ub2e4."}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Ingress \uc0dd\uc131"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ingress \ub9ac\uc18c\uc11c\ub97c \uc0dd\uc131\uc744 \ud558\uba74 AWS\uc5d0\uc11c NLB \uc790\ub3d9 \uc0dd\uc131"}),"\n",(0,i.jsx)(n.li,{children:"NLB\ub294 \uc5f0\uacb0\ub41c \uc11c\ube0c\ub137\uc5d0 \uc788\ub294 \ubaa8\ub4e0 AZ\uc5d0 IP\ub97c \ud560\ub2f9"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"headless-service",children:"Headless service"}),"\n",(0,i.jsx)(n.p,{children:"\uc544\ub798\uc640 \uac19\uc774 \uc124\uc815\uc744 \ud558\uba74 headless service\uac00 \ub41c\ub2e4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"clusterIP: None\n"})}),"\n",(0,i.jsx)(n.p,{children:"Headless\ub97c \ud558\uba74 pod\ub85c \uac00\ub294\uac8c \uc544\ub2c8\ub77c pod\uc758 backend\uc758 IP\uc8fc\uc18c\ub97c \uc900\ub2e4."}),"\n",(0,i.jsx)(n.p,{children:"\uc5b4\ub514\uc5d0 \uc4f0\ub294\uc9c0? \uc65c \uc4f0\ub294\uc9c0?\n\ubd84\uc0b0\ud615 \ub370\uc774\ud130 \uc800\uc7a5 \uc11c\ube44\uc2a4(DB, Messeage Queue, InMemory DB)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\ud074\ub77c\uc774\uc5b8\ud2b8 \uc5f0\uacb0"}),"\n",(0,i.jsx)(n.li,{children:"\uba87 \uac1c\uac00 \uc0b4\uc544\uc788\ub294\uc9c0 \ud655\uc778\ud558\uae30 \uc704\ud574\uc11c"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\ud2b9\uc815 \ub178\ub4dc\uc758 \ub370\uc774\ud130\ub97c \ud655\uc778\ud574\uc57c\ud560 \ub54c -> \uc774\uac8c \ud575\uc2ec"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\ubd84\uc0b0\ud615 \ub370\uc774\ud130\ubca0\uc774\uc2a4 (Cassandra, Mongo, Redis)\uc5d0 \uc800\uc7a5\uc774 \ub420 \ub54c \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud574\uc11c\ub294 Hash Algorithm\uc744 \uc4f4\ub2e4. \uc774 \ub54c \ub178\ub4dc\uc5d0 \uc800\uc7a5\uc744 \ud558\uae30 \uc704\ud574\uc11c\ub294 \ub178\ub4dc\uc758 \uc815\ubcf4\ub97c \uc54c\uc57c\uc544\ud558\ub294\ub370 \uc5b4\ub97c \ub54c \ub178\ub4dc\uc758 \uc815\ubcf4\ub97c \ubc18\ud658\ud558\uae30 \uc704\ud574\uc11c Headless\ub97c \uc774\uc6a9\ud55c\ub2e4."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Hash Algorithm\uc744 \uc0ac\uc6a9\ud560 \ub54c Node\uc758 \uac2f\uc218\uac00 \uc57d 10 \uc774\uc0c1\uc758 \uc18c\uc218\uc778 \uacbd\uc6b0\uc5d0 even\ud558\uac8c \uac12\uc774 \ubd84\uc0b0\uc774 \ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"volume",children:"volume"}),"\n",(0,i.jsx)(n.p,{children:"docker image layer\uc5d0 hash \uac12\uc774 \uc788\ub294 \uc774\uc720\ub294 ?"}),"\n",(0,i.jsx)(n.p,{children:"\uac00\uc0c1 \uba38\uc2e0\uc758 \ub514\uc2a4\ud06c\ub97c \uc4f0\uac8c \ub41c\ub2e4\uba74, \ud558\ub098\ub9cc \uc218\uc815\ud574\ub3c4 \uc804\uccb4\uac00 \ubcc0\uacbd\uc774 \ub41c\ub2e4. \uc774 \ub54c docker \uc758 layer\ub97c \uc0dd\uac01\uc744 \ud558\uba74 \uce90\uc2dc\ub97c \ud560 \uc218 \uc788\ub2e4\ub294 \uc810\uc774\ub2e4. \ub530\ub77c\uc11c \ubcc0\uacbd\uc774 \ub418\uba74 \ud574\uc2dc \uac12\uc774 \ubc14\ub01c\uc73c\ub85c \uc778\ud574\uc11c \ubcc0\uacbd \uc0ac\ud56d\uc744 \ud30c\uc545 \uac00\ub2a5\ud558\ub2e4."}),"\n",(0,i.jsx)(n.p,{children:"\ucee8\ud14c\uc774\ub108\uac00 \uc885\ub8cc\ub41c\ub2e4\uba74? \ub2e4 \uc0ac\ub77c\uc9d0.\n-> \ucee8\ud14c\uc774\ub108\uac00 \uc885\ub8cc\ub418\uc5b4\ub3c4 \ub370\uc774\ud130\ub97c \uc720\uc9c0\ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc740 \uc678\ubd80 \ub514\uc2a4\ud06c \ubcfc\ub968\uc744 \ub9c8\uc6b4\ud2b8 \ud558\ub294 \uac83\uc785\ub2c8\ub2e4."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"EmptyDir: Pod\uac00 \uc885\ub8cc\ub418\uba74 \uc601\uad6c\uc801\uc73c\ub85c \uc0ad\uc81c\ub429\ub2c8\ub2e4. (\uc989 Pod\uc640 \ub3d9\uc77c\ud55c LifeCycle\uc744 \uac00\uc9c0\uac8c \ub429\ub2c8\ub2e4.) --\x3e \uadf8\ub7f0\ub370 \uc65c \uc4f8\uae4c\uc694? \ub300\uaddc\ubaa8 \uae30\ubc18 \uc815\ub82c \uc791\uc5c5, Pod \ub0b4\uc758 \ucee8\ud14c\uc774\ub108 \uac04 \ud30c\uc77c \uad50\ud658\uc744 \ud558\uae30 \uc704\ud568\uc774\uc5d0\uc694."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"HostPath: pod\uac00 \uc885\ub8cc\ub418\uc5b4\ub3c4 \uc0c1\ud0dc\uac00 \uc720\uc9c0\uac00 \ub429\ub2c8\ub2e4. \ub2e4\ub9cc Pod\ub294 \ud56d\uc0c1 \ub2e4\ub978 \ub178\ub4dc\ub85c \uc774\ub3d9 \uac00\ub2a5\uc131\uc774 \uc874\uc7ac\ud558\uae30 \ub54c\ubb38\uc5d0 \uc5d0\ub7ec\uac00 \ub0a0 \uc218 \uc788\ub2e4\ub294 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"persistent volume(PV)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"block disk (\ub178\ud2b8\ubd81 c drive) : \ub3d9\uc2dc\uc5d0 \uc77d\uc744 \uc218\ub294 \uc788\uc9c0\ub9cc, \uc4f8 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. | \uc21c\uc11c\uac00 \uc81c\uc77c \ube60\ub985\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.li,{children:"network file disk(systme) = NFS : \uc5ec\ub7ec \uc0ac\uc6a9\uc790\uac00 \uc811\uadfc\ud558\uc5ec \ub3d9\uc2dc\uc5d0 \uc4f8 \uc218 \uc788\uace0, \uc77d\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4. | 2\uc21c\uc704"}),"\n",(0,i.jsx)(n.li,{children:"object dist (aws S3) : 3\uc21c\uc704 => \ub300\uaddc\ubaa8 \uc791\uc5c5\uc740 \uc5ec\uae30\uc11c \uc9c4\ud589\uc744 \ud569\ub2c8\ub2e4. \uc65c \uadf8\ub7f4\uae4c\uc694? Append only, \ud30c\uc77c\uc744 \uc5f4\uc5b4\uc11c \uc218\uc815\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. => \uc65c \uadf8\ub7f4\uae4c\uc694? \ubd84\uc0b0 \uc791\uc5c5\uc5d0 \uc720\ub9ac\ud558\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4. (\uc5f0\uc0b0 \uc911\uc5d0 \ubcc0\uacbd\uc744 \ud558\uba74 \ucc98\uc74c\ubd80\ud130 \ub2e4\uc2dc \ud574\uc57c\ud558\ub294\ub370, \uc774\ub7f0 \uc791\uc5c5\uc744 \uc560\ucd08\uc5d0 \ub2eb\uc544\ubc84\ub9bd\ub2c8\ub2e4.)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\uc2e4\uc2b5",children:"\uc2e4\uc2b5"}),"\n",(0,i.jsx)(n.h3,{id:"1-httpd-\ubc30\ud3ec--\uc774\ubbf8\uc9c0-\uc5c5\ub370\uc774\ud2b8--\ub864\ubc31--\uc0ad\uc81c",children:"1. HTTPD \ubc30\ud3ec \u2192 \uc774\ubbf8\uc9c0 \uc5c5\ub370\uc774\ud2b8 \u2192 \ub864\ubc31 \u2192 \uc0ad\uc81c"}),"\n",(0,i.jsx)(n.p,{children:"\uc544\ub798 \ud30c\uc77c \ud1b5\ud574\uc11c httpd\ub97c \uc124\uce58\ud55c\ub2e4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: httpd-deployment\n  labels:\n    app: httpd\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: httpd\n  template:\n    metadata:\n      labels:\n        app: httpd\n    spec:\n      containers:\n        - name: httpd\n          image: httpd:2.4\n          ports:\n            - containerPort: 80\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. Deployment"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f ./deploy-practice.yml\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"httpd-deployment \ub77c\ub294 \uc774\ub984\uc758 deployment\uac00 \uc0dd\uc131\uc774 \ub41c\ub2e4."}),"\n",(0,i.jsx)(n.li,{children:"POD\ub294 \uae30\ubcf8 \uc124\uc815\uc5d0 \ub530\ub77c\uc11c \uc801\uc6a9\uc774 \ub41c\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. \ubcc0\uacbd \uc0ac\uc720(Revision 1) \uc8fc\uc11d(Annotation) \ucd94\uac00"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'kubectl annotate deploy httpd-deployment kubernetes.io/change-cause="first"\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'\uae30\ub85d\uc5d0 "first"\ub77c\ub294 \uc124\uba85\uc744 \ucd94\uac00\ud55c\ub2e4.'}),"\n",(0,i.jsx)(n.li,{children:"rollout history \uc5d0 Revision 1\ub85c \uae30\ub85d\uc774 \ub41c\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. \uc774\ubbf8\uc9c0 \uc5c5\ub370\uc774\ud2b8 \ubc0f \ubcc0\uacbd \uc0ac\uc720 \ub4f1\ub85d (Revision 2)"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'kubectl set image deploy httpd-deployment httpd=httpd:latest\n\nkubectl annotate deploy httpd-deployment kubernetes.io/change-cause="update latest"\n\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["httpd \ucee8\ud130\uc774\ub108\uc758 \uc774\ubbf8\uc9c0\uac00 httpd",":latest","\ub85c \uc5c5\ub370\uc774\ud2b8\uac00 \ub41c\ub2e4."]}),"\n",(0,i.jsx)(n.li,{children:"update latest \ub85c \uc8fc\uc11d \ucd94\uac00\uac00 \ub41c\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"4. \ub864\uc544\uc6c3 \uc0c1\ud0dc \ud655\uc778 \ubc0f \ud30c\ub4dc \ud655\uc778"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl rollout status deploy httpd-deployment\n\nkubectl get pods -l app=httpd\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\ud30c\ub4dc\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ubc30\ud3ec\uac00 \ub41c\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"5. Scale out"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl scale deploy httpd-deployment --replicas=5\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\ub808\ud50c\ub9ac\uce74 \uc218\uac00 5\uac1c\ub85c \uc99d\uac00\uac00 \ub41c\ub2e4. \uae30\uc874\uc5d0\uc11c 2\uac1c \ucd94\uac00\uac00 \ub41c\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"6. Rollback"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'kubectl rollout undo deploy httpd-deployment\n\nkubectl annotate deploy httpd-deployment kubernetes.io/change-cause="rollback"\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\uc774\uc804 \ube44\uc804\uc73c\ub85c \ub864\ubc31\uc774 \uc9c4\ud589\uc774 \ub41c\ub2e4."}),"\n",(0,i.jsx)(n.li,{children:"\ub864\ubc31 \uc0ac\uc720\ub294 rollback\uc73c\ub85c \uae30\ub85d"}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);